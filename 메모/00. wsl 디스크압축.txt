# --------------------------------------------------------------------------
# WSL 가상 디스크(.vhdx) 용량 최적화(diskpart방식)
# --------------------------------------------------------------------------

1. 
powershell 실행

2. 
wsl --shutdown

3. 
diskpart

4. 
select vdisk file="C:\Users\eps\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu22.04LTS_79rhkp1fndgsc\LocalState\ext4.vhdx"
또는
select vdisk file="C:\Users\eps\AppData\Local\wsl\{9f3e4d40-919a-4691-9b71-b33227439e95}\ext4.vhdx"

5.
attach vdisk readonly
compact vdisk
detach vdisk
exit

6.
wsl
================================================================================================================
# --------------------------------------------------------------------------
# WSL 가상 디스크(.vhdx) 용량 최적화(Hyper-V방식)
# --------------------------------------------------------------------------

1. [Ubuntu]
sudo apt autoremove -y
sudo apt clean
sudo fstrim -v /

2. [powershell] 관리자권한
wsl --shutdown
Optimize-VHD -Path "C:\Users\eps\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu22.04LTS_79rhkp1fndgsc\LocalState\ext4.vhdx" -Mode Full